<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Blocked by Focus Mode</title>
  <style>
    body {
      background: #d32f2f;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }
    #override {
      background-color: #f5f5f5;
      color: #d32f2f;
      border: none;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
    }
    #override:hover {
      background-color: #fff;
    }
    #remaining {
      font-size: 1.2em;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>⚠️ This site is blocked during Focus Mode</h1>
  <p>Stay on track! Your focus is important.</p>
  <div id="remaining">Session ends in <span id="countdown">--:--</span></div>
  
  <!-- Optional override button for emergencies (if you allow it): -->
  <button id="override">Override (I really need this!)</button>
  
  <script>
    // Update countdown timer
    const updateCountdown = async () => {
      try {
        const response = await chrome.runtime.sendMessage({ type: "GET_FOCUS_TIME_LEFT" });
        if (response && response.seconds) {
          const mins = Math.floor(response.seconds / 60);
          const secs = Math.floor(response.seconds % 60);
          document.getElementById("countdown").textContent = 
            `${mins}:${secs.toString().padStart(2, '0')}`;
          
          if (response.seconds <= 0) {
            // Session ended, reload the page
            window.location.reload();
          }
        }
      } catch (err) {
        console.error("Error getting focus time:", err);
      }
    };
    
    // Setup countdown updater
    updateCountdown();
    setInterval(updateCountdown, 5000);
    
    // Setup override button
    const overrideBtn = document.getElementById("override");
    if (overrideBtn) {
      overrideBtn.addEventListener("click", () => {
        chrome.runtime.sendMessage({ type: "OVERRIDE_BLOCK" }, response => {
          if (response?.success) {
            // Possibly close this tab or reload the site
            window.location.href = response.url || "about:blank";
          }
        });
      });
    }
  </script>
</body>
</html> 