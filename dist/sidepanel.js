(()=>{"use strict";const e=document.getElementById("timer"),t=document.getElementById("endBtn"),o=document.getElementById("blockedList");async function n(){try{const t=await chrome.runtime.sendMessage({type:"GET_FOCUS_TIME_LEFT"}),o=(null==t?void 0:t.seconds)||0;if(o<=0)return e.textContent="COMPLETE",void(e.style.color="#4caf50");const n=Math.floor(o/60),r=Math.floor(o%60);e.textContent=`${n}:${r.toString().padStart(2,"0")}`,o<300&&(e.style.color="#ff9800")}catch(t){console.error("Error fetching time left:",t),e.textContent="ERROR",e.style.color="#f44336"}}async function r(){try{const o=confirm("Save current workspace before ending?");let n="";if(o&&(n=prompt("Enter workspace name:",`Workspace_${(new Date).toLocaleDateString()}`)||"",!n))return;await chrome.runtime.sendMessage({type:"END_FOCUS_SESSION",payload:{saveWorkspace:o,workspaceName:n}}),e.textContent="ENDED",e.style.color="#f44336",t.disabled=!0,t.textContent="Session Ended"}catch(e){console.error("Error ending session:",e),alert("Error ending session. Please try again.")}}document.addEventListener("DOMContentLoaded",(function(){null==t||t.addEventListener("click",r),async function(){try{const{blockedCategories:e}=await chrome.storage.local.get("blockedCategories");if(!o)return;e&&e.length>0?(o.innerHTML="",e.forEach((e=>{const t=document.createElement("div");t.className="context-item blocked",t.textContent=e,o.appendChild(t)}))):o.innerHTML='<div class="context-item">No categories blocked</div>'}catch(e){console.error("Error loading blocked categories:",e),o&&(o.innerHTML='<div class="context-item">Error loading categories</div>')}}().catch(console.error),n().catch(console.error),setInterval((()=>{n().catch(console.error)}),1e3)}))})();
//# sourceMappingURL=sidepanel.js.map