(()=>{"use strict";var e={8:(e,t)=>{function o(e){return new Promise(((t,o)=>{chrome.storage.local.get(e,(e=>{if(chrome.runtime.lastError)return o(chrome.runtime.lastError);t(e)}))}))}function n(e){return new Promise(((t,o)=>{chrome.storage.local.set(e,(()=>{if(chrome.runtime.lastError)return o(chrome.runtime.lastError);t()}))}))}async function a(){const{focusState:e}=await o(["focusState"]);return Object.assign(Object.assign({},{active:!1,allowedContexts:[]}),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setFocusState=t.getFocusState=t.addContextToHistory=t.setStorage=t.getStorage=void 0,t.getStorage=o,t.setStorage=n,t.addContextToHistory=async function(e,t,a){const{contextHistory:r}=await o(["contextHistory"]),s=r||[];s.push({context:e,url:t,timestamp:Date.now(),confidence:a}),s.length>100&&s.shift(),await n({contextHistory:s})},t.getFocusState=a,t.setFocusState=async function(e){const t=await a();await n({focusState:Object.assign(Object.assign({},t),e)})}},18:(e,t)=>{let o;async function n(){try{if(void 0!==o)try{return await chrome.windows.get(o),o}catch(e){o=void 0}const{id:e}=await chrome.windows.create({url:"about:blank",type:"normal",state:"maximized"});if(o=e,e){const t=await chrome.tabs.query({windowId:e});t.length>0&&t[0].id&&await chrome.tabs.update(t[0].id,{url:chrome.runtime.getURL("blocked.html")+"?mode=welcome"})}return o}catch(e){return void console.error("Error launching focus window:",e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.moveTabToFocusWindow=t.getFocusWindowId=t.closeFocusWindow=t.launchFocusWindow=void 0,t.launchFocusWindow=n,t.closeFocusWindow=async function(){if(void 0!==o)try{await chrome.windows.remove(o),o=void 0}catch(e){console.error("Error closing focus window:",e),o=void 0}},t.getFocusWindowId=function(){return o},t.moveTabToFocusWindow=async function(e){if(void 0===o&&void 0===await n())return!1;try{return await chrome.tabs.move(e,{windowId:o,index:-1}),!0}catch(e){return console.error("Error moving tab to focus window:",e),!1}}},56:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pickColorForContext=void 0,t.pickColorForContext=function(e){switch(e){case"Work":return"yellow";case"Learning":return"blue";case"Entertainment":return"green";case"News":return"red";case"Shopping":return"purple";case"Social":return"cyan";case"Research":return"pink";case"Development":return"orange";default:return"grey"}}},170:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeLeft=t.isActive=t.isBlocked=t.end=t.start=void 0;const n=o(8);let a,r,s=!1;async function c(){await(0,n.setFocusState)({active:!1,endTime:void 0}),chrome.action.setBadgeText({text:""}),r&&(clearInterval(r),r=void 0),s=!1,a&&(clearTimeout(a),a=void 0)}t.start=async function(e,t){const o=Array.isArray(e)?e:[],a=t?Date.now()+60*t*1e3:void 0;await(0,n.setFocusState)({active:!0,allowedContexts:o,endTime:a}),chrome.action.setBadgeText({text:"•"}),chrome.action.setBadgeBackgroundColor({color:"#1565c0"}),a&&(r&&clearInterval(r),r=setInterval((async()=>{const e=await(0,n.getFocusState)();e.active&&e.endTime&&e.endTime<=Date.now()&&(console.log("Focus timer expired automatically"),c(),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Focus Session Ended",message:"Your focus session has ended. Great job!",priority:2}))}),15e3))},t.end=c,t.isBlocked=async function(e){const t=await(0,n.getFocusState)();return!(!t.active||(Array.isArray(t.allowedContexts)?(console.log("[FocusEngine] allowed:",t.allowedContexts,"context:",e),t.allowedContexts.includes(e)||(s=!0,chrome.action.setBadgeText({text:"!"}),chrome.action.setBadgeBackgroundColor({color:"#d32f2f"}),a&&clearTimeout(a),a=setTimeout((()=>{s&&(s=!1,chrome.action.setBadgeText({text:"•"}),chrome.action.setBadgeBackgroundColor({color:"#1565c0"}))}),3e4),0)):(console.error("[FocusEngine] allowedContexts is not an array:",t.allowedContexts),1)))},t.isActive=async function(){return(await(0,n.getFocusState)()).active},t.getTimeLeft=async function(){const e=await(0,n.getFocusState)();if(!e.active||!e.endTime)return 0;const t=Math.max(0,e.endTime-Date.now());return Math.floor(t/6e4)}},282:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setSidePanelProperties=t.closeSidePanel=t.openSidePanel=void 0,t.openSidePanel=async function(){try{const e=await chrome.windows.getCurrent();await chrome.sidePanel.open({windowId:e.id}),console.log("Side panel opened successfully")}catch(e){console.error("Error opening side panel:",e)}},t.closeSidePanel=async function(){try{const e=await chrome.sidePanel.getAll();await Promise.all(e.map((e=>chrome.sidePanel.close({windowId:e.windowId})))),console.log("Side panels closed successfully")}catch(e){console.error("Error closing side panels:",e)}},t.setSidePanelProperties=async function(e,t){try{await chrome.sidePanel.setOptions({path:e,enabled:!0}),console.log("Side panel properties updated")}catch(e){console.error("Error setting side panel properties:",e)}}},524:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeWorkspace=t.restoreWorkspace=t.saveCurrentWorkspace=t.isUrlBlocked=t.getFocusSessionTimeLeft=t.isFocusSessionActive=t.endFocusSession=t.startFocusSession=void 0;const n=o(8),a=o(591),r=o(18),s=o(282),c=o(569);let i=!1;function u(e,t){chrome.action.setBadgeBackgroundColor({color:t?"#d32f2f":"#1565c0"}),chrome.action.setBadgeText({text:e>0?Math.ceil(e).toString():""}),chrome.action.setIcon({path:chrome.runtime.getURL("icons/icon48.png")})}async function l(){const e=await(0,n.getFocusState)();if(!e.active||!e.endTime)return 0;const t=Date.now(),o=e.endTime-t;return o>0?o/1e3:0}async function d(e){const t=await chrome.tabGroups.query({}),o=await Promise.all(t.map((async e=>{const t=await chrome.tabs.query({groupId:e.id});return{groupId:e.id,title:e.title||"",color:e.color,tabUrls:t.map((e=>e.url||""))}}))),{savedWorkspaces:a}=await(0,n.getStorage)(["savedWorkspaces"]),r={name:e,tabGroups:o,timestamp:Date.now()},s=Array.isArray(a)?[...a,r]:[r];await(0,n.setStorage)({savedWorkspaces:s})}t.startFocusSession=async function(e,t){var o;const a=Date.now()+6e4*e,c=["Work","Development","Research","Learning","Entertainment","Social","Shopping","News"].filter((e=>!t.includes(e)));await(0,n.setFocusState)({active:!0,allowedContexts:c,endTime:a}),await(0,n.setStorage)({blockedCategories:t}),await(0,s.openSidePanel)(),u(e,!1),chrome.alarms.create("badgeUpdate",{periodInMinutes:.2}),i||(chrome.alarms.onAlarm.addListener((async e=>{"badgeUpdate"===e.name&&u(await l()/60,await async function(){const{focusSettings:e}=await(0,n.getStorage)(["focusSettings"]);if(!e)return!1;const t=await chrome.runtime.sendMessage({type:"CHECK_FOCUS_STATUS"});return(null==t?void 0:t.isLostFocus)||!1}())})),i=!0),!!(null===(o=(await(0,n.getStorage)(["focusSettings"])).focusSettings)||void 0===o?void 0:o.focusWindowEnabled)&&await(0,r.launchFocusWindow)(),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Focus Session Started",message:`Focus session started for ${e} minutes. Stay focused!`})},t.endFocusSession=async function(e,t=""){e&&t&&await d(t),await(0,n.setFocusState)({active:!1,endTime:void 0}),await(0,s.closeSidePanel)(),await(0,a.ungroupAllTabs)(),chrome.action.setBadgeText({text:""}),chrome.action.setIcon({path:chrome.runtime.getURL("icons/icon48.png")}),chrome.alarms.clear("badgeUpdate"),await(0,r.closeFocusWindow)(),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Focus Session Ended",message:"Great job! Your focus session has ended."}),await(0,c.releaseParkedLinks)()},t.isFocusSessionActive=async function(){return(await(0,n.getFocusState)()).active},t.getFocusSessionTimeLeft=l,t.isUrlBlocked=async function(e,t){const o=await(0,n.getFocusState)();return!!o.active&&!(!t||o.allowedContexts.includes(t))},t.saveCurrentWorkspace=d,t.restoreWorkspace=async function(e){const{savedWorkspaces:t}=await(0,n.getStorage)(["savedWorkspaces"]);if(!t)return;const o=t.find((t=>t.name===e));if(o)for(const e of o.tabGroups){const t=[];for(const o of e.tabUrls){const e=await chrome.tabs.create({url:o,active:!1});t.push(e.id)}if(t.length>0){const o=await chrome.tabs.group({tabIds:t});await chrome.tabGroups.update(o,{title:e.title||"",color:e.color})}}},t.removeWorkspace=async function(e){const{savedWorkspaces:t}=await(0,n.getStorage)(["savedWorkspaces"]);if(!t)return;const o=t.filter((t=>t.name!==e));await(0,n.setStorage)({savedWorkspaces:o})}},545:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var a=Object.getOwnPropertyDescriptor(t,o);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,a)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(591),c=o(8),i=o(887),u=o(524),l=o(569),d=r(o(170)),g={},m=chrome.runtime.getURL("blocked.html");async function h(){try{if(!(await(0,c.getFocusState)()).active)return void chrome.action.setBadgeText({text:""});const e=await d.getTimeLeft();if(e>0){const t=Math.ceil(e/60);chrome.action.setBadgeText({text:t.toString()}),(await(0,i.checkFocusStatus)()).isLostFocus?chrome.action.setBadgeBackgroundColor({color:"#d32f2f"}):chrome.action.setBadgeBackgroundColor({color:"#1565c0"})}else{const e=await(0,i.checkFocusStatus)(),t=e.contextSwitches.length;chrome.action.setBadgeText({text:t.toString()}),e.isLostFocus?chrome.action.setBadgeBackgroundColor({color:"#d32f2f"}):chrome.action.setBadgeBackgroundColor({color:"#1565c0"})}}catch(e){console.error("Error updating badge:",e)}}async function f(){await d.getTimeLeft()<=0&&await d.isActive()&&(await d.end(),console.log("[Focus] Session ended automatically due to timeout"),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Focus Session Complete",message:"Your timed focus session has ended."}))}async function w(e){return(await chrome.storage.local.get([e]))[e]||{contexts:[],training:{falsePositives:[],truePositives:[]}}}async function p(e,t){await chrome.storage.local.set({[e]:t})}chrome.runtime.onMessage.addListener(((e,t,o)=>{var n,a;if("CONTEXT_UPDATE"===e.type||"CONTEXT_DETECTED"===e.type){const o=e.context,a=null===(n=t.tab)||void 0===n?void 0:n.id;return null!=a&&(g[a],g[a]=o,e.confidence,e.secondaryContexts,e.url,chrome.storage.local.set({[e.url]:{context:e.context,confidence:e.confidence}}),async function(e,t){const{autoGroupEnabled:o=!0}=await(0,c.getStorage)(["autoGroupEnabled"]);!1!==o&&(await(0,s.groupTabByContext)(e,t),h())}(a,o).catch((e=>console.error(e)))),!1}if("FOCUS_TOGGLE"===e.type)return async function(e){e?h():(await(0,s.ungroupAllTabs)(),chrome.action.setBadgeText({text:""}))}(e.enabled).catch((e=>console.error(e))),!1;if("START_FOCUS_SESSION"===e.type){const{durationMinutes:t,blockedCategories:n}=e.payload||{},a=["Work","Development","Research","Learning","Entertainment","Social","Shopping","News"].filter((e=>!(null==n?void 0:n.includes(e))));return d.start(a,t).then((()=>o({success:!0}))).catch((e=>{console.error(e),o({success:!1,error:e.message})})),!0}if("END_FOCUS_SESSION"===e.type)return d.end().then((()=>o({success:!0}))).catch((e=>{console.error("Error ending focus session:",e),o({success:!1,error:e.message})})),!0;if("GET_FOCUS_TIME_LEFT"===e.type)return(0,c.getFocusState)().then((e=>{const t=e.endTime?Math.max(0,(e.endTime-Date.now())/1e3):0;o({seconds:t})})).catch((e=>{console.error("Error getting focus time left:",e),o({seconds:0})})),!0;if("OVERRIDE_BLOCK"===e.type)return o({success:!0}),!0;if("RESTORE_WORKSPACE"===e.type){const{name:t}=e.payload||{};return(0,u.restoreWorkspace)(t).then((()=>o({success:!0}))).catch((e=>{console.error(e),o({success:!1,error:e.message})})),!0}if("CHECK_FOCUS_STATUS"===e.type)return(0,i.checkFocusStatus)().then((e=>o(e))).catch((e=>{console.error("Error checking focus status:",e),o(null)})),!0;if("CONTENT_SCRIPT_READY"===e.type)return null===(a=t.tab)||void 0===a||a.id,o({success:!0}),!0;if("TIMER_EXPIRED"===e.type)return chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0]&&e[0].id&&chrome.tabs.sendMessage(e[0].id,{type:"DRIFT_WARNING",message:"Time's up! Return to your primary task now."},(t=>{(chrome.runtime.lastError||void 0===t)&&chrome.tabs.update(e[0].id,{url:m})}))})),o({success:!0}),!0;if("PARK_LINK"===e.type){const{url:t,context:o,title:n}=e;return(async()=>{try{await(0,l.saveForLater)(t,o,n),console.log(`[Parked Links] Saved for later: ${n||t} (${o})`)}catch(e){console.error("Error parking link:",e)}})(),!1}return"RELEASE_PARKED_LINKS"===e.type?((async()=>{try{await(0,l.releaseParkedLinks)(),o({success:!0})}catch(e){console.error("Error releasing parked links:",e),o({success:!1,error:String(e)})}})(),!0):"TRAIN_CONTEXT"===e.type?((async()=>{const{url:t,title:n,actualContext:a,predictedContext:r,isFalsePositive:s}=e,c=await w(t);c.training||(c.training={falsePositives:[],truePositives:[]}),s?c.training.falsePositives.push({timestamp:Date.now(),actualContext:a,predictedContext:r}):c.training.truePositives.push({timestamp:Date.now(),actualContext:a,predictedContext:r}),await p(t,c),await async function(e){const t=await w(e),{training:o}=t;if(!o)return;const n={};o.falsePositives.forEach((e=>{n[e.predictedContext]=.9*(n[e.predictedContext]||1)})),o.truePositives.forEach((e=>{n[e.predictedContext]=1.1*(n[e.predictedContext]||1)})),t.weights=n,await p(e,t)}(t),o({success:!0})})(),!0):"STAY_FOCUSED_ACTION"===e.type?((async()=>{const{url:t,context:n,title:a}=e.payload;try{await(0,l.saveForLater)(t,n,a);const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});(null==e?void 0:e.id)&&await(0,l.goBackOrClose)(e.id),o({success:!0})}catch(e){console.error("Stay‑focused flow failed:",e),o({success:!1,error:e instanceof Error?e.message:String(e)})}})(),!0):"FOCUS_STATUS"===e.type&&((0,c.getFocusState)().then((e=>o(e))).catch((e=>{console.error("Error getting focus status:",e),o(null)})),!0)})),(0,s.onTabRemoved)((e=>{delete g[e]})),chrome.tabs.onUpdated.addListener(((e,t,o)=>{"complete"===t.status&&o.url&&!o.url.startsWith("chrome://")&&setTimeout((()=>{}),500)})),chrome.runtime.onInstalled.addListener((e=>{"install"===e.reason?(chrome.storage.local.set({extensionEnabled:!0,autoGroupEnabled:!0,focusState:{active:!1,allowedContexts:[]},firstRunComplete:!1}),chrome.tabs.create({url:chrome.runtime.getURL("onboarding.html")})):"update"===e.reason&&chrome.storage.local.get(["autoGroupEnabled","focusSessionActive","focusSessionEndTime","blockedCategories","focusState"],(e=>{const t={extensionEnabled:!0};if(!e.focusState&&(e.focusSessionActive||e.blockedCategories)){console.log("Migrating from old focus session format to new focusState format");const o=["Work","Development","Research","Learning","Entertainment","Social","Shopping","News"],n=e.blockedCategories||[],a=o.filter((e=>!n.includes(e)));t.focusState={active:!0===e.focusSessionActive,allowedContexts:a,endTime:e.focusSessionEndTime||void 0},chrome.storage.local.remove(["focusSessionActive","focusSessionEndTime","blockedCategories"])}void 0===e.autoGroupEnabled&&(t.autoGroupEnabled=!0),chrome.storage.local.set(t)}))})),async function(){await(0,c.setStorage)({extensionEnabled:!0}),console.log("[Background] Extension enabled.");const e=await(0,c.getFocusState)();e.active&&(console.log("[Background] Focus session was active at shutdown, verifying..."),!e.endTime||e.endTime<=Date.now()?(console.log("[Background] Focus session expired during shutdown, cleaning up"),await(0,c.setFocusState)({active:!1,endTime:void 0})):console.log(`[Background] Focus session continues until ${new Date(e.endTime).toLocaleTimeString()}`)),chrome.tabs.onUpdated.addListener((async(e,t,o)=>{if(t.url&&o.url)try{await async function(e){if(!(await(0,c.getFocusState)()).active)return!1;try{const t=await w(e),o=null==t?void 0:t.context;return!!o&&d.isBlocked(o)}catch(e){return console.error("Error classifying URL:",e),!1}}(o.url)&&(console.log(`[Focus] Blocking URL: ${o.url}`),chrome.tabs.update(e,{url:m}))}catch(e){console.error("Error checking URL:",e)}})),setInterval(f,3e4),setInterval((async()=>{try{if(await d.isActive()){const e=await(0,i.checkFocusStatus)();e.isLostFocus&&await async function(e){var t,o;try{if(!await d.isActive())return;console.log("[Focus] Sending drift warning to active tab",e);const n=await chrome.tabs.query({active:!0,currentWindow:!0});if(!n.length||!n[0].id)return;const a=n[0],r=a.id;if((null===(t=a.url)||void 0===t?void 0:t.startsWith("chrome://"))||(null===(o=a.url)||void 0===o?void 0:o.startsWith("chrome-extension://")))return;let s="YOU'RE DRIFTING FROM YOUR FOCUS TASK!";if(e.contextSwitches.length>0){const t=e.contextSwitches[e.contextSwitches.length-1];s=`FOCUS LOST: Switched from ${t.from} to ${t.to}`}chrome.tabs.sendMessage(r,{type:"DRIFT_WARNING",message:s},(e=>{(chrome.runtime.lastError||void 0===e)&&chrome.tabs.update(r,{url:m})})),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"FOCUS ALERT!",message:s,priority:2,requireInteraction:!0}),console.log("[Focus] Drift warning sent successfully")}catch(e){console.error("Error sending drift warning:",e)}}(e),h()}}catch(e){console.error("Error in focus check interval:",e)}}),1e4)}().catch(console.error)},569:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearParkedLinks=t.showToast=t.goBackOrClose=t.releaseParkedLinks=t.getParkedLinks=t.saveForLater=void 0;const n=o(8);async function a(){const{parkedLinks:e=[]}=await(0,n.getStorage)(["parkedLinks"]);return e}async function r(e,t){try{const o=await chrome.tabs.query({windowId:t.windowId});if(o.length>1){const t=o.findIndex((t=>t.id===e)),n=o[t>0?t-1:(t+1)%o.length];n.id&&(await chrome.tabs.update(n.id,{active:!0}),setTimeout((()=>{chrome.tabs.remove(e).catch((e=>{console.error("Tab removal failed:",e)}))}),100))}else await chrome.tabs.update(e,{url:"about:blank"})}catch(t){console.error("Navigation fallback failed:",t);try{await chrome.tabs.update(e,{url:"about:blank"})}catch(e){console.error("Final fallback failed:",e)}}}t.saveForLater=async function(e,t,o){const{parkedLinks:a=[]}=await(0,n.getStorage)(["parkedLinks"]);if(!a.some((t=>t.url===e))){const r={url:e,title:o,context:t,timestamp:Date.now()};await(0,n.setStorage)({parkedLinks:[...a,r]})}},t.getParkedLinks=a,t.releaseParkedLinks=async function(){const e=await a();if(0===e.length)return;let t;await chrome.windows.getCurrent();try{const o=[];for(const t of e){const e=await chrome.tabs.create({url:t.url,active:!1});e.id&&o.push(e.id)}if(o.length>0)try{t=await chrome.tabs.group({tabIds:o}),t&&await chrome.tabGroups.update(t,{title:"Parked Links",color:"blue"})}catch(e){console.error("Error creating tab group:",e)}await(0,n.setStorage)({parkedLinks:[]}),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Parked Links Opened",message:`Opened ${e.length} links that were saved during your focus session.`})}catch(e){console.error("Error opening parked links:",e)}},t.goBackOrClose=async function(e){try{const t=await chrome.tabs.get(e);try{const o=await chrome.scripting.executeScript({target:{tabId:e},func:()=>({canGoBack:window.history.length>1,url:window.location.href})}),{canGoBack:n}=o[0].result;if(n)return void await chrome.scripting.executeScript({target:{tabId:e},func:()=>window.history.back()});await r(e,t)}catch(o){console.error("Script execution error:",o);try{await chrome.tabs.goBack(e)}catch(o){await r(e,t)}}}catch(e){console.error("Tab lookup error:",e)}},t.showToast=async function(e,t,o=3e3){try{await chrome.scripting.executeScript({target:{tabId:e},func:(e,t)=>{const o=document.createElement("div");o.style.cssText="\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          background-color: rgba(0, 102, 204, 0.9);\n          color: white;\n          padding: 12px 20px;\n          border-radius: 4px;\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          font-family: Arial, sans-serif;\n          z-index: 2147483647;\n          max-width: 300px;\n          transition: opacity 0.3s ease-in-out;\n        ",o.textContent=e,document.body.appendChild(o),setTimeout((()=>{o.style.opacity="0",setTimeout((()=>o.remove()),300)}),t-300)},args:[t,o]})}catch(e){console.error("Error showing toast:",e)}},t.clearParkedLinks=async function(){await(0,n.setStorage)({parkedLinks:[]})}},591:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ungroupAllTabs=t.onTabRemoved=t.groupTabByContext=void 0;const n=o(56);t.groupTabByContext=async function(e,t){let o=(await chrome.tabGroups.query({})).find((e=>e.title===t));if(o)await chrome.tabs.group({groupId:o.id,tabIds:[e]});else{const a=await chrome.tabs.group({tabIds:[e]});o=await chrome.tabGroups.update(a,{title:t,color:(0,n.pickColorForContext)(t)})}},t.onTabRemoved=function(e){chrome.tabs.onRemoved.addListener(e)},t.ungroupAllTabs=async function(){const e=await chrome.tabGroups.query({});for(const t of e){const e=await chrome.tabs.query({groupId:t.id});e.length&&await chrome.tabs.ungroup(e.map((e=>e.id)))}}},887:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.showFocusNotification=t.checkFocusStatus=t.getContextSwitches=t.updateFocusSettings=t.getFocusSettings=void 0;const n=o(8),a={enabled:!0,notificationsEnabled:!0,switchThreshold:5,timeWindowMinutes:15};async function r(){const{focusSettings:e}=await(0,n.getStorage)(["focusSettings"]);return Object.assign(Object.assign({},a),e)}async function s(e=15){const{contextHistory:t}=await(0,n.getStorage)(["contextHistory"]);if(!t||t.length<2)return[];const o=[],a=Date.now(),r=60*e*1e3,s=t.filter((e=>a-e.timestamp<r));for(let e=1;e<s.length;e++)s[e].context!==s[e-1].context&&o.push({from:s[e-1].context,to:s[e].context,timestamp:s[e].timestamp,fromUrl:s[e-1].url,toUrl:s[e].url});return o}t.getFocusSettings=r,t.updateFocusSettings=async function(e){const t=await r();await(0,n.setStorage)({focusSettings:Object.assign(Object.assign({},t),e)})},t.getContextSwitches=s,t.checkFocusStatus=async function(){const e=await r(),t=await s(e.timeWindowMinutes);let o="Unknown",a=1;const{contextHistory:c}=await(0,n.getStorage)(["contextHistory"]);if(c&&c.length>0){o=c[c.length-1].context;let e=c.length-1;for(;e>0&&c[e].context===o;)a++,e--}return{isLostFocus:t.length>=e.switchThreshold,contextSwitches:t,currentStreak:a,currentContext:o}},t.showFocusNotification=function(e){chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Focus Alert",message:`You've switched contexts ${e.length} times recently. Try to maintain focus.`,buttons:[{title:"View Details"}]})}}},t={};!function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}(545)})();
//# sourceMappingURL=background.js.map