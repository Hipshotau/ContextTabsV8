(()=>{"use strict";var t={8:(t,e)=>{function n(t){return new Promise(((e,n)=>{chrome.storage.local.get(t,(t=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);e(t)}))}))}function o(t){return new Promise(((e,n)=>{chrome.storage.local.set(t,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);e()}))}))}async function a(){const{focusState:t}=await n(["focusState"]);return Object.assign(Object.assign({},{active:!1,allowedContexts:[]}),t)}Object.defineProperty(e,"__esModule",{value:!0}),e.setFocusState=e.getFocusState=e.addContextToHistory=e.setStorage=e.getStorage=void 0,e.getStorage=n,e.setStorage=o,e.addContextToHistory=async function(t,e,a){const{contextHistory:c}=await n(["contextHistory"]),r=c||[];r.push({context:t,url:e,timestamp:Date.now(),confidence:a}),r.length>100&&r.shift(),await o({contextHistory:r})},e.getFocusState=a,e.setFocusState=async function(t){const e=await a();await o({focusState:Object.assign(Object.assign({},e),t)})}}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var c=e[o]={exports:{}};return t[o](c,c.exports,n),c.exports}(()=>{const t=n(8),e=document.getElementById("inactiveUI"),o=document.getElementById("activeUI"),a=document.getElementById("contextList"),c=document.getElementById("duration"),r=document.getElementById("startBtn"),i=document.getElementById("endBtn"),s=document.getElementById("allowedTags"),d=document.getElementById("countdown"),u=["Work","Development","Research","Learning","Entertainment","Social","Shopping","News"];function l(t){if(!t.endTime)return void(d.textContent="No time limit");const e=Date.now(),n=Math.max(0,t.endTime-e);if(n<=0)return void(d.textContent="Time expired");const o=Math.floor(n/6e4),a=Math.floor(n%6e4/1e3);d.textContent=`${o}:${a.toString().padStart(2,"0")} remaining`}document.addEventListener("DOMContentLoaded",(async function(){a.innerHTML="",u.forEach((t=>{const e=document.createElement("div");e.className="context-checkbox";const n=document.createElement("input");n.type="checkbox",n.value=t,n.id=`context-${t}`,n.className="context-checkbox-input";const o=document.createElement("label");o.textContent=t,o.htmlFor=`context-${t}`,e.appendChild(n),e.appendChild(o),a.appendChild(e)}));const n=await(0,t.getFocusState)();n.active?function(t){e.hidden=!0,o.hidden=!1,s.textContent=t.allowedContexts.join(", "),l(t)}(n):(e.hidden=!1,o.hidden=!0),r.addEventListener("click",(()=>{const t=document.querySelectorAll(".context-checkbox-input:checked"),e=Array.from(t).map((t=>t.value));if(0===e.length)return void alert("Please select at least one context to focus on");const n=c.value?parseInt(c.value,10):void 0,o=u.filter((t=>!e.includes(t)));chrome.runtime.sendMessage({type:"START_FOCUS_SESSION",payload:{blockedCategories:o,durationMinutes:n}},(()=>{window.location.reload()}))})),i.addEventListener("click",(()=>{chrome.runtime.sendMessage({type:"END_FOCUS_SESSION"},(()=>{window.location.reload()}))})),setInterval((async()=>{const e=await(0,t.getFocusState)();e.active&&!o.hidden&&l(e)}),1e3)}))})()})();
//# sourceMappingURL=popup.js.map