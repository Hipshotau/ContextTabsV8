(()=>{"use strict";var e={8:(e,t)=>{function n(e){return new Promise(((t,n)=>{chrome.storage.local.get(e,(e=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);t(e)}))}))}function o(e){return new Promise(((t,n)=>{chrome.storage.local.set(e,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);t()}))}))}async function a(){const{focusState:e}=await n(["focusState"]);return Object.assign(Object.assign({},{active:!1,allowedContexts:[]}),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setFocusState=t.getFocusState=t.addContextToHistory=t.setStorage=t.getStorage=void 0,t.getStorage=n,t.setStorage=o,t.addContextToHistory=async function(e,t,a){const{contextHistory:r}=await n(["contextHistory"]),i=r||[];i.push({context:e,url:t,timestamp:Date.now(),confidence:a}),i.length>100&&i.shift(),await o({contextHistory:i})},t.getFocusState=a,t.setFocusState=async function(e){const t=await a();await o({focusState:Object.assign(Object.assign({},t),e)})}},569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearParkedLinks=t.showToast=t.goBackOrClose=t.releaseParkedLinks=t.getParkedLinks=t.saveForLater=void 0;const o=n(8);async function a(){const{parkedLinks:e=[]}=await(0,o.getStorage)(["parkedLinks"]);return e}async function r(e,t){try{const n=await chrome.tabs.query({windowId:t.windowId});if(n.length>1){const t=n.findIndex((t=>t.id===e)),o=n[t>0?t-1:(t+1)%n.length];o.id&&(await chrome.tabs.update(o.id,{active:!0}),setTimeout((()=>{chrome.tabs.remove(e).catch((e=>{console.error("Tab removal failed:",e)}))}),100))}else await chrome.tabs.update(e,{url:"about:blank"})}catch(t){console.error("Navigation fallback failed:",t);try{await chrome.tabs.update(e,{url:"about:blank"})}catch(e){console.error("Final fallback failed:",e)}}}t.saveForLater=async function(e,t,n){const{parkedLinks:a=[]}=await(0,o.getStorage)(["parkedLinks"]);if(!a.some((t=>t.url===e))){const r={url:e,title:n,context:t,timestamp:Date.now()};await(0,o.setStorage)({parkedLinks:[...a,r]})}},t.getParkedLinks=a,t.releaseParkedLinks=async function(){const e=await a();if(0===e.length)return;let t;await chrome.windows.getCurrent();try{const n=[];for(const t of e){const e=await chrome.tabs.create({url:t.url,active:!1});e.id&&n.push(e.id)}if(n.length>0)try{t=await chrome.tabs.group({tabIds:n}),t&&await chrome.tabGroups.update(t,{title:"Parked Links",color:"blue"})}catch(e){console.error("Error creating tab group:",e)}await(0,o.setStorage)({parkedLinks:[]}),chrome.notifications.create({type:"basic",iconUrl:chrome.runtime.getURL("icons/icon48.png"),title:"Parked Links Opened",message:`Opened ${e.length} links that were saved during your focus session.`})}catch(e){console.error("Error opening parked links:",e)}},t.goBackOrClose=async function(e){try{const t=await chrome.tabs.get(e);try{const n=await chrome.scripting.executeScript({target:{tabId:e},func:()=>({canGoBack:window.history.length>1,url:window.location.href})}),{canGoBack:o}=n[0].result;if(o)return void await chrome.scripting.executeScript({target:{tabId:e},func:()=>window.history.back()});await r(e,t)}catch(n){console.error("Script execution error:",n);try{await chrome.tabs.goBack(e)}catch(n){await r(e,t)}}}catch(e){console.error("Tab lookup error:",e)}},t.showToast=async function(e,t,n=3e3){try{await chrome.scripting.executeScript({target:{tabId:e},func:(e,t)=>{const n=document.createElement("div");n.style.cssText="\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          background-color: rgba(0, 102, 204, 0.9);\n          color: white;\n          padding: 12px 20px;\n          border-radius: 4px;\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          font-family: Arial, sans-serif;\n          z-index: 2147483647;\n          max-width: 300px;\n          transition: opacity 0.3s ease-in-out;\n        ",n.textContent=e,document.body.appendChild(n),setTimeout((()=>{n.style.opacity="0",setTimeout((()=>n.remove()),300)}),t-300)},args:[t,n]})}catch(e){console.error("Error showing toast:",e)}},t.clearParkedLinks=async function(){await(0,o.setStorage)({parkedLinks:[]})}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{const e=n(8),t=n(569),o=document.getElementById("extensionEnabledCheckbox"),a=document.getElementById("notificationsCheckbox"),r=document.getElementById("switchThresholdInput"),i=document.getElementById("timeWindowInput"),s=document.getElementById("saveBtn"),c=document.getElementById("resetBtn"),d=document.getElementById("subUrlOverridesList"),l=document.getElementById("overrideUrlInput"),u=document.getElementById("overrideContextSelect"),m=document.getElementById("addOverrideBtn"),p=document.getElementById("parkedLinksList"),h=document.getElementById("releaseParkedBtn"),k=document.getElementById("clearParkedBtn"),g={enabled:!0,notificationsEnabled:!0,switchThreshold:3,timeWindowMinutes:30};async function f(){const t={enabled:!0,notificationsEnabled:a.checked,switchThreshold:parseInt(r.value)||3,timeWindowMinutes:parseInt(i.value)||30},n={};d.querySelectorAll(".override-item").forEach((e=>{const t=e.querySelector(".override-url"),o=e.querySelector(".override-context");t&&o&&(n[t.textContent||""]=o.textContent||"")})),await(0,e.setStorage)({extensionEnabled:o.checked,focusSettings:t,subUrlOverrides:n}),v("Options saved!")}function v(e,t=2e3){const n=document.createElement("div");n.textContent=e,n.style.position="fixed",n.style.bottom="20px",n.style.right="20px",n.style.backgroundColor="#4CAF50",n.style.color="white",n.style.padding="10px 20px",n.style.borderRadius="4px",n.style.zIndex="1000",document.body.appendChild(n),setTimeout((()=>{n.remove()}),t)}async function w(){o.checked=!0;const t={enabled:!0,notificationsEnabled:!0,switchThreshold:3,timeWindowMinutes:30};a.checked=t.notificationsEnabled,r.value=t.switchThreshold.toString(),i.value=t.timeWindowMinutes.toString(),d.innerHTML="",await(0,e.setStorage)({extensionEnabled:!0,focusSettings:t,subUrlOverrides:{}}),v("Options reset to defaults")}function y(){const e=l.value.trim(),t=u.value;e?(b(e,t),l.value=""):v("Please enter a URL",3e3)}function b(e,t){const n=document.createElement("div");n.className="override-item";const o=document.createElement("span");o.className="override-url",o.textContent=e;const a=document.createElement("span");a.className="override-context",a.textContent=t;const r=document.createElement("button");r.innerHTML="&times;",r.className="link-remove",r.addEventListener("click",(()=>{n.remove()})),n.appendChild(o),n.appendChild(a),n.appendChild(r),d.appendChild(n)}async function x(t){if(p){if(p.innerHTML="",!t||0===t.length){const e=document.createElement("div");return e.className="empty-state",e.textContent="No links have been parked yet.",void p.appendChild(e)}t.forEach((t=>{const n=document.createElement("div");n.className="parked-link-item";const o=document.createElement("div"),a=document.createElement("div");a.className="link-title",a.textContent=t.title||"Untitled";const r=document.createElement("div");r.className="link-url",r.textContent=t.url,o.appendChild(a),o.appendChild(r);const i=document.createElement("button");i.className="link-remove",i.innerHTML="&times;",i.addEventListener("click",(async()=>{await async function(t){const{parkedLinks:n}=await(0,e.getStorage)(["parkedLinks"]);if(n){const o=n.filter((e=>e.url!==t));await(0,e.setStorage)({parkedLinks:o})}}(t.url),n.remove(),0===p.children.length&&await x([])})),n.appendChild(o),n.appendChild(i),p.appendChild(n)}))}}async function E(){try{await(0,t.releaseParkedLinks)(),await x([]),v("All links have been opened in new tabs")}catch(e){console.error("Error releasing parked links:",e),v("Error opening links",3e3)}}async function L(){confirm("Are you sure you want to clear all parked links?")&&(await(0,t.clearParkedLinks)(),await x([]),v("All parked links have been cleared"))}document.addEventListener("DOMContentLoaded",(async function(){var t,n,l,u;const p=await(0,e.getStorage)(["extensionEnabled","focusSettings","subUrlOverrides","parkedLinks"]);o.checked=null===(t=p.extensionEnabled)||void 0===t||t;const v=p.focusSettings||g;a.checked=null===(n=v.notificationsEnabled)||void 0===n||n,r.value=(null===(l=v.switchThreshold)||void 0===l?void 0:l.toString())||"3",i.value=(null===(u=v.timeWindowMinutes)||void 0===u?void 0:u.toString())||"30",s.addEventListener("click",f),c.addEventListener("click",w),function(e){if(d.innerHTML="",0===Object.keys(e).length){const e=document.createElement("div");return e.className="empty-state",e.textContent="No URL overrides configured yet.",void d.appendChild(e)}Object.entries(e).forEach((([e,t])=>{b(e,t)}))}(p.subUrlOverrides||{}),m.addEventListener("click",y),await x(p.parkedLinks||[]),h&&h.addEventListener("click",E),k&&k.addEventListener("click",L)}))})()})();
//# sourceMappingURL=options.js.map