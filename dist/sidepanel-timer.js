(()=>{const e=document.getElementById("time-remaining"),t=document.getElementById("context-name"),n=document.getElementById("end-timer"),o=document.getElementById("warning-message");let l,a=0,r="",s="";function i(){chrome.storage.local.get(["activeGlobalTimer"],(n=>{if(n.activeGlobalTimer&&n.activeGlobalTimer.active){const{endTime:e,fromContext:o,toContext:i}=n.activeGlobalTimer;a=e,r=o,s=i,t.textContent=`Switched from "${r}" to "${s}"`,l&&clearInterval(l),d(),l=setInterval((()=>{d()}),1e3)}else e.textContent="No active timer",t.textContent="N/A",o.style.display="none"}))}function d(){const t=Date.now(),n=Math.max(0,a-t);if(n<=0)return e.textContent="Expired",clearInterval(l),o.textContent="Timer has expired. Return to your focus now!",o.style.display="block",o.classList.add("pulsing"),void chrome.runtime.sendMessage({type:"TIMER_EXPIRED"});const r=Math.floor(n/6e4),s=Math.floor(n%6e4/1e3);e.textContent=`${r}:${s.toString().padStart(2,"0")}`,n<6e4?(e.style.color="#f44336",e.classList.add("pulsing"),o.style.display="block"):(e.style.color="",e.classList.remove("pulsing"),o.style.display="none")}n.addEventListener("click",(()=>{chrome.runtime.sendMessage({type:"END_FOCUS_TIMER"}),e.textContent="Timer ended",clearInterval(l),o.style.display="none",t.textContent="Timer ended - returned to focus"})),chrome.runtime.onMessage.addListener((n=>{"TIMER_UPDATED"===n.type?i():"TIMER_ENDED"===n.type&&(e.textContent="Timer ended",t.textContent="N/A",o.style.display="none",clearInterval(l))})),document.addEventListener("DOMContentLoaded",i),setInterval(i,5e3)})();
//# sourceMappingURL=sidepanel-timer.js.map